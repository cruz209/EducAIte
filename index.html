
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Study Companion - Ask Questions</title>-->

<!--    &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">-->

<!--    <style>-->
<!--        body {-->
<!--            padding-top: 50px;-->
<!--            background: linear-gradient(135deg, #f9d423 0%, #ff4e50 100%);-->
<!--            color: #fff;-->
<!--        }-->

<!--        .container {-->
<!--            max-width: 800px;-->
<!--            margin: auto;-->
<!--        }-->

<!--        .card {-->
<!--            margin-bottom: 20px;-->
<!--            background-color: #fff;-->
<!--            color: #000;-->
<!--        }-->

<!--        #response {-->
<!--            margin-top: 20px;-->
<!--        }-->

<!--        /* Character and Speech Bubble Styling */-->
<!--        .character-container {-->
<!--            position: relative;-->
<!--            text-align: center;-->
<!--            margin-top: 40px;-->
<!--        }-->

<!--        .character {-->
<!--            width: 200px;-->
<!--        }-->

<!--        .speech-bubble {-->
<!--            position: absolute;-->
<!--            top: -50px;-->
<!--            left: 50%;-->
<!--            transform: translateX(-50%);-->
<!--            background-color: white;-->
<!--            color: black;-->
<!--            border-radius: 15px;-->
<!--            padding: 10px 20px;-->
<!--            font-size: 18px;-->
<!--            display: none; /* Hidden initially */-->
<!--            width: 300px;-->
<!--        }-->

<!--        .speech-bubble::after {-->
<!--            content: '';-->
<!--            position: absolute;-->
<!--            bottom: -20px;-->
<!--            left: 50%;-->
<!--            transform: translateX(-50%);-->
<!--            border-width: 10px;-->
<!--            border-style: solid;-->
<!--            border-color: white transparent transparent transparent;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--    <div class="container">-->
<!--        <div class="text-center">-->
<!--            <h1 class="mb-4">AI-Powered Study Companion</h1>-->
<!--            <p class="lead">Upload your document and ask questions about it!</p>-->
<!--        </div>-->

<!--        &lt;!&ndash; Character Section with Speech Bubble &ndash;&gt;-->
<!--        <div class="character-container">-->


<!--            <div class="speech-bubble" id="speech-bubble">I'm ready to answer your questions!</div>-->
<!--        </div>-->

<!--        &lt;!&ndash; File Upload Section &ndash;&gt;-->
<!--        <div class="card">-->
<!--            <div class="card-header">-->
<!--                <h5>Upload a File</h5>-->
<!--            </div>-->
<!--            <div class="card-body">-->
<!--                <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">-->
<!--                    <div class="mb-3">-->
<!--                        <input class="form-control" type="file" name="file" id="file" required>-->
<!--                    </div>-->
<!--                    <button type="submit" class="btn btn-primary">Upload</button>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Question Form Section &ndash;&gt;-->
<!--        <div class="card">-->
<!--            <div class="card-header">-->
<!--                <h5>Ask a Question</h5>-->
<!--            </div>-->
<!--            <div class="card-body">-->
<!--                <form id="question-form">-->
<!--                    <div class="mb-3">-->
<!--                        <input type="text" id="question" name="question" class="form-control" placeholder="Ask your question" required>-->
<!--                    </div>-->
<!--                    <button type="submit" class="btn btn-success">Ask</button>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; Response Section &ndash;&gt;-->
<!--        <div id="response" class="alert alert-info d-none"></div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Bootstrap JS and Dependencies &ndash;&gt;-->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>-->

<!--    <script>-->
<!--        // Handle file upload form submission-->
<!--        document.getElementById("upload-form").onsubmit = async function(e) {-->
<!--            e.preventDefault();-->
<!--            const formData = new FormData(this);-->

<!--            let response = await fetch("/upload", {-->
<!--                method: "POST",-->
<!--                body: formData-->
<!--            });-->

<!--            let result = await response.text();-->
<!--            alert(result);  // Show a success message (you can customize this)-->
<!--        };-->

<!--        // Handle question asking form submission-->
<!--        document.getElementById("question-form").onsubmit = async function(e) {-->
<!--            e.preventDefault();-->
<!--            const question = document.getElementById("question").value;-->

<!--            let response = await fetch("/ask_question", {-->
<!--                method: "POST",-->
<!--                headers: {-->
<!--                    "Content-Type": "application/x-www-form-urlencoded"-->
<!--                },-->
<!--                body: new URLSearchParams({ "question": question })-->
<!--            });-->

<!--            let result = await response.json();-->

<!--            const responseDiv = document.getElementById("response");-->
<!--            const speechBubble = document.getElementById("speech-bubble");-->

<!--            // Display the response from the LLM-->
<!--            if (result.answer) {-->
<!--                responseDiv.classList.remove("d-none", "alert-danger");-->
<!--                responseDiv.classList.add("alert-success");-->
<!--                responseDiv.innerHTML = `<strong>Answer:</strong> ${result.answer}`;-->

<!--                // Show speech bubble with the answer-->
<!--                speechBubble.innerHTML = result.answer;-->
<!--                speechBubble.style.display = 'block';  // Show the speech bubble-->
<!--            } else if (result.error) {-->
<!--                responseDiv.classList.remove("d-none", "alert-success");-->
<!--                responseDiv.classList.add("alert-danger");-->
<!--                responseDiv.innerHTML = `<strong>Error:</strong> ${result.error}`;-->

<!--                // Show speech bubble with the error-->
<!--                speechBubble.innerHTML = result.error;-->
<!--                speechBubble.style.display = 'block';  // Show the speech bubble-->
<!--            }-->
<!--        };-->
<!--    </script>-->

<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Companion - Ask Questions</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            padding-top: 50px;
            background: linear-gradient(135deg, #f9d423 0%, #ff4e50 100%);
            color: #fff;
        }

        .container {
            max-width: 800px;
            margin: auto;
        }

        .card {
            margin-bottom: 20px;
            background-color: #fff;
            color: #000;
        }

        #response {
            margin-top: 20px;
            background-color: #d1ecf1;
            color: #0c5460;
            border-color: #bee5eb;
            padding: 15px;
            border-radius: 5px;
        }

        /* Character and Speech Bubble Styling */
        .character-container {
            position: relative;
            text-align: center;
            margin-top: 40px;
        }

        .character {
            width: 200px;
        }

        .speech-bubble {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            color: black;
            border-radius: 15px;
            padding: 10px 20px;
            font-size: 18px;
            display: none; /* Hidden initially */
            width: 300px;
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px;
            border-style: solid;
            border-color: white transparent transparent transparent;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="text-center">
            <h1 class="mb-4">AI-Powered Study Companion</h1>
            <p class="lead">Upload your document and ask questions about it!</p>
        </div>

        <!-- Character Section with Speech Bubble -->
        <div class="character-container">
            <!-- Character and Speech Bubble (Initial message) -->
            <div class="speech-bubble" id="speech-bubble">I'm ready to answer your questions!</div>
        </div>

        <!-- File Upload Section -->
        <div class="card">
            <div class="card-header">
                <h5>Upload a File</h5>
            </div>
            <div class="card-body">
                <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
                    <div class="mb-3">
                        <input class="form-control" type="file" name="file" id="file" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Upload</button>
                </form>
            </div>
        </div>

        <!-- Question Form Section -->
        <div class="card">
            <div class="card-header">
                <h5>Ask a Question</h5>
            </div>
            <div class="card-body">
                <form id="question-form">
                    <div class="mb-3">
                        <input type="text" id="question" name="question" class="form-control" placeholder="Ask your question" required>
                    </div>
                    <button type="submit" class="btn btn-success">Ask</button>
                </form>
            </div>
        </div>

        <!-- Response Section (Blue Box for LLM Response) -->
        <div id="response" class="d-none"></div>
    </div>

    <!-- Bootstrap JS and Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Handle file upload form submission
        document.getElementById("upload-form").onsubmit = async function(e) {
            e.preventDefault();
            const formData = new FormData(this);

            let response = await fetch("/upload", {
                method: "POST",
                body: formData
            });

            let result = await response.text();
            alert(result);  // Show a success message (you can customize this)
        };

        // Handle question asking form submission
        document.getElementById("question-form").onsubmit = async function(e) {
            e.preventDefault();
            const question = document.getElementById("question").value;

            let response = await fetch("/ask_question", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: new URLSearchParams({ "question": question })
            });

            let result = await response.json();

            const responseDiv = document.getElementById("response");

            // Display the response from the LLM only in the blue box
            if (result.answer) {
                responseDiv.classList.remove("d-none");
                responseDiv.innerHTML = `<strong>Answer:</strong> ${result.answer}`;
            } else if (result.error) {
                responseDiv.classList.remove("d-none");
                responseDiv.innerHTML = `<strong>Error:</strong> ${result.error}`;
            }
        };
    </script>

</body>
</html>
